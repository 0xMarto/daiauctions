"use strict";const FLIPPER_ABI=[{inputs:[{internalType:"address",name:"vat_",type:"address"},{internalType:"bytes32",name:"ilk_",type:"bytes32"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lot",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tab",type:"uint256"},{indexed:!0,internalType:"address",name:"usr",type:"address"},{indexed:!0,internalType:"address",name:"gal",type:"address"}],name:"Kick",type:"event"},{anonymous:!0,inputs:[{indexed:!0,internalType:"bytes4",name:"sig",type:"bytes4"},{indexed:!0,internalType:"address",name:"usr",type:"address"},{indexed:!0,internalType:"bytes32",name:"arg1",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"arg2",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"data",type:"bytes"}],name:"LogNote",type:"event"},{constant:!0,inputs:[],name:"beg",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"bids",outputs:[{internalType:"uint256",name:"bid",type:"uint256"},{internalType:"uint256",name:"lot",type:"uint256"},{internalType:"address",name:"guy",type:"address"},{internalType:"uint48",name:"tic",type:"uint48"},{internalType:"uint48",name:"end",type:"uint48"},{internalType:"address",name:"usr",type:"address"},{internalType:"address",name:"gal",type:"address"},{internalType:"uint256",name:"tab",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"deal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"lot",type:"uint256"},{internalType:"uint256",name:"bid",type:"uint256"}],name:"dent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"}],name:"deny",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"what",type:"bytes32"},{internalType:"uint256",name:"data",type:"uint256"}],name:"file",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ilk",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"},{internalType:"address",name:"gal",type:"address"},{internalType:"uint256",name:"tab",type:"uint256"},{internalType:"uint256",name:"lot",type:"uint256"},{internalType:"uint256",name:"bid",type:"uint256"}],name:"kick",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"kicks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"}],name:"rely",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"tau",outputs:[{internalType:"uint48",name:"",type:"uint48"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"lot",type:"uint256"},{internalType:"uint256",name:"bid",type:"uint256"}],name:"tend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"tick",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ttl",outputs:[{internalType:"uint48",name:"",type:"uint48"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"vat",outputs:[{internalType:"contract VatLike",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"wards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"yank",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],OSM_ABI=[{inputs:[{internalType:"address",name:"src_",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!0,inputs:[{indexed:!0,internalType:"bytes4",name:"sig",type:"bytes4"},{indexed:!0,internalType:"address",name:"usr",type:"address"},{indexed:!0,internalType:"bytes32",name:"arg1",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"arg2",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"data",type:"bytes"}],name:"LogNote",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"val",type:"bytes32"}],name:"LogValue",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"bud",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src_",type:"address"}],name:"change",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"}],name:"deny",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"a",type:"address[]"}],name:"diss",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"a",type:"address"}],name:"diss",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"hop",outputs:[{internalType:"uint16",name:"",type:"uint16"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"a",type:"address[]"}],name:"kiss",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"a",type:"address"}],name:"kiss",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"pass",outputs:[{internalType:"bool",name:"ok",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"peek",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"peep",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"poke",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"read",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"}],name:"rely",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"src",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"start",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint16",name:"ts",type:"uint16"}],name:"step",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"stop",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"stopped",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"void",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"wards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"zzz",outputs:[{internalType:"uint64",name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"}],CDP_MANAGER_ABI=[{inputs:[{internalType:"address",name:"vat_",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!0,inputs:[{indexed:!0,internalType:"bytes4",name:"sig",type:"bytes4"},{indexed:!0,internalType:"address",name:"usr",type:"address"},{indexed:!0,internalType:"bytes32",name:"arg1",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"arg2",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"data",type:"bytes"}],name:"LogNote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"usr",type:"address"},{indexed:!0,internalType:"address",name:"own",type:"address"},{indexed:!0,internalType:"uint256",name:"cdp",type:"uint256"}],name:"NewCdp",type:"event"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"usr",type:"address"},{internalType:"uint256",name:"ok",type:"uint256"}],name:"cdpAllow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"cdpCan",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"cdpi",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"count",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"uint256",name:"cdp",type:"uint256"}],name:"enter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"first",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"ilk",type:"bytes32"},{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"wad",type:"uint256"}],name:"flux",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"wad",type:"uint256"}],name:"flux",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"int256",name:"dink",type:"int256"},{internalType:"int256",name:"dart",type:"int256"}],name:"frob",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"dst",type:"address"}],name:"give",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ilks",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"last",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"list",outputs:[{internalType:"uint256",name:"prev",type:"uint256"},{internalType:"uint256",name:"next",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"rad",type:"uint256"}],name:"move",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"ilk",type:"bytes32"},{internalType:"address",name:"usr",type:"address"}],name:"open",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"owns",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdp",type:"uint256"},{internalType:"address",name:"dst",type:"address"}],name:"quit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"cdpSrc",type:"uint256"},{internalType:"uint256",name:"cdpDst",type:"uint256"}],name:"shift",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"usr",type:"address"},{internalType:"uint256",name:"ok",type:"uint256"}],name:"urnAllow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"urnCan",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"urns",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"vat",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],BAT_FLIP_ADDRESS="0xF7C569B2B271354179AaCC9fF1e42390983110BA",OSM_ADDRESS="0xB4eb54AF9Cc7882DF0121d26c5b97E802915ABe6",CDP_MANAGER_ADDRESS="0x5ef30b9986345249bc32d8928B7ee64DE9435E39",CAT_ADDRESS="0x78F2c2AF65126834c51822F56Be0d7469D7A523E";var web3,usingRemoteProvider=!0;if(void 0!==window.ethereum&&window.ethereum.networkVersion&&"1"===window.ethereum.networkVersion&&window.ethereum.isMetaMask)try{(web3=new Web3(window.ethereum)).eth.subscribe("newBlockHeaders").unsubscribe(),console.log("使用本地Web3提供程序"),usingRemoteProvider=!1}catch(t){usingRemoteProvider=!0}if(usingRemoteProvider){var infura="wss://mainnet.infura.io/ws/v3/f77d1e38219b45d4b4965a1c247c1aff",provider=new Web3.providers.WebsocketProvider(infura);web3=new Web3(provider),console.log("使用远程Web3提供程序")}const flipContract=new web3.eth.Contract(FLIPPER_ABI,BAT_FLIP_ADDRESS),osmContract=new web3.eth.Contract(OSM_ABI,OSM_ADDRESS),cdpManagerContract=new web3.eth.Contract(CDP_MANAGER_ABI,CDP_MANAGER_ADDRESS);var events=[],getFlipEvents=function(t){return console.log(`获取拍卖事件的区块: ${t}`),flipContract.getPastEvents("allEvents",{fromBlock:t,toBlock:"latest"},function(t,e){t?console.log(t):(console.log("已接收到的事件:",e.length),events=e)})},osmPrice=0,getOsmPrice=function(t){return osmContract.getPastEvents("LogValue",{fromBlock:t-600,toBlock:t},function(t,e){if(!t){var n=e[e.length-1];if(!n)return 0;var a=web3.utils.toBN(n.returnValues[0]),i=web3.utils.fromWei(a);return osmPrice=parseFloat(i).toFixed(4),i}console.log(t)})},getVaultNumber=async function(t){let e=await web3.eth.getTransactionReceipt(t),n=await cdpManagerContract.methods.cdpi().call();for(let t=0;t<e.logs.length;t++){let a=e.logs[t];if(a.address===CAT_ADDRESS){let t=a.topics[2].slice(-40);for(let e=n;e>0;e--){let n=await cdpManagerContract.methods.urns(e).call();if(t===(n=n.slice(-40)).toLowerCase())return e}}}};const TEND="0x4b43ed1200000000000000000000000000000000000000000000000000000000",DENT="0x5ff3a38200000000000000000000000000000000000000000000000000000000",DEAL="0xc959c42b00000000000000000000000000000000000000000000000000000000",TICK="0xfc7b6aee00000000000000000000000000000000000000000000000000000000";var auctions={},eventsLoaded=!1,showEvents=async function(t){0===Object.keys(auctions).length&&(document.getElementById("app").innerHTML=""),events.length>0&&hideFilterSearch();for(let e=0;e<events.length;e++){let n=events[e],a="",i=new Date;await web3.eth.getBlock(n.blockNumber).then(function(t){if(t){let e=t.timestamp;i=new Date(1e3*e),a=i.toLocaleString()+" | "}else a=(new Date).toLocaleString()+" | "});let s="Unknown",p=0;if("Kick"===n.event){s="KICK",p=parseInt(n.returnValues.id,10),a+="序号: <b>"+p+"</b> | ";let t=n.returnValues.lot/1e18;a+="数量: "+t.toFixed(3)+" bat | ";let e=n.returnValues.tab/1e27/1e18;a+="初始竞价: "+e.toFixed(3)+" dai | ",osmPrice=0,await getOsmPrice(n.blockNumber),auctions[p]={id:p,kickDate:i.toUTCString().slice(5),kickDay:i.getUTCDate(),kickMonth:i.getUTCMonth()+1,kickPrice:osmPrice.toString(),kickLot:t.toFixed(5),tends:0,dents:0,bid:null,lot:null,tab:e.toFixed(5),guy:null,dealPrice:null,paidPrice:null,state:"OPEN"},a+=osmPrice>0?"Maker OSM喂价: $"+auctions[p].kickPrice+" | ":"Maker OSM喂价: $---,-- | "}else if(n.raw.topics[0]===TEND){if(s="TEND",p=parseInt(n.raw.topics[2],16),!auctions[p])continue;a+="序号: <b>"+p+"</b> | ";let t=parseInt(n.raw.topics[3],16)/1e18;a+="数量: "+t.toFixed(3)+" bat | ";let e=n.raw.data.slice(288,-248),i=parseInt(e,16)/1e27/1e18;if(a+="竞标价: "+i.toFixed(3)+" dai | ",osmPrice=0,await getOsmPrice(n.blockNumber),auctions[p].tends+=1,auctions[p].bid=i.toFixed(5),auctions[p].bidPrice=osmPrice.toString(),auctions[p].lot=t.toFixed(5),auctions[p].paidPrice=(i/t).toFixed(4),osmPrice>0){let t=100*(auctions[p].paidPrice/auctions[p].bidPrice-1);a+=t>0?"+"+t.toFixed(1)+" % | ":t.toFixed(1)+" % | ",a+="价格: $"+auctions[p].bidPrice+" | "}else a+="--,-- % | 价格: $---,-- | "}else if(n.raw.topics[0]===DENT){if(s="DENT",p=parseInt(n.raw.topics[2],16),!auctions[p])continue;a+="序号: <b>"+p+"</b> | ";let t=parseInt(n.raw.topics[3],16)/1e18;a+="数量: "+t.toFixed(3)+" bat | ";let e=n.raw.data.slice(288,-248),i=parseInt(e,16)/1e27/1e18;if(a+="竞标价: "+i.toFixed(3)+" dai | ",osmPrice=0,await getOsmPrice(n.blockNumber),auctions[p].dents+=1,auctions[p].bid=i.toFixed(5),auctions[p].bidPrice=osmPrice.toString(),auctions[p].lot=t.toFixed(5),auctions[p].paidPrice=(i/t).toFixed(4),osmPrice>0){let t=100*(auctions[p].paidPrice/auctions[p].bidPrice-1);a+=t>0?"+"+t.toFixed(2)+" % | ":t.toFixed(2)+" % | ",a+="价格: $"+auctions[p].bidPrice+" | "}else a+="--,-- % | 价格: $---,-- | "}else if(n.raw.topics[0]===DEAL){if(s="DEAL",p=parseInt(n.raw.topics[2],16),!auctions[p])continue;if(a+="序号: <b>"+p+"</b> | ",osmPrice=0,await getOsmPrice(n.blockNumber),auctions[p].dealPrice=osmPrice.toString(),auctions[p].state="CLOSE",osmPrice){a+="最终支付: $"+auctions[p].paidPrice+" dai/bat ";let t=100*(auctions[p].paidPrice/auctions[p].dealPrice-1);a+=t>0?"(+"+t.toFixed(2)+"%) ~ <b>失败</b> | ":"("+t.toFixed(2)+"%) ~ <b>胜利!</b> | ",a+="价格: $"+auctions[p].dealPrice+" | "}else a+="最终支付: $"+auctions[p].paidPrice+" dai/bat (+-.--%) | ",a+="--,-- % | 价格: $---,-- | "}else n.raw.topics[0]===TICK?(s="TICK",p=parseInt(n.raw.topics[2],16),a+="序号: <b>"+p+"</b> | ",a+="时间延长! | "):(console.log("未知时间"),console.log(n));await web3.eth.getTransaction(n.transactionHash).then(function(t){let e=t.from.slice(0,6)+"..."+t.from.slice(-4),i=`<a target="_blank" href="${`https://cn.etherscan.com/tx/${n.transactionHash}`}">交易号信息:..${n.transactionHash.slice(-3)}</a>`;a+=`地址: ${e} | ${i} >>`,auctions[p]&&(auctions[p].guy=e)});let y=document.getElementById("app").innerHTML,u="";0!==t&&t!==p||(u='<div class="row flip-'+p+" "+s.toLowerCase()+'">'+s+" >> "+a+"</div>"),document.getElementById("app").innerHTML=u+y}Object.keys(auctions).length>0?showFilter():showEmptyMessage(),eventsLoaded=!0},lastBlockfetch=0,fetchAuctions=async function(t){let e=(lastBlockfetch=await web3.eth.getBlockNumber())-18095;await getFlipEvents(e),await showEvents(t)};async function newBlock(t,e){if(e){let t=e.number;if(!eventsLoaded)return;eventsLoaded=!1,await getFlipEvents(t),await showEvents(0)}else console.log(t)}function showFilter(){let t=document.getElementById("filter-panel");if(t){t.style.display="block",document.getElementById("search").style.display="inline",document.getElementById("no-results").style.display="none",showLastUpdate()}}function showLastUpdate(){let t=document.getElementById("last-update"),e=(new Date).toLocaleString();t.innerHTML=`- 更新时间: ${e}`}function hideFilterSearch(){let t=document.getElementById("search");t&&(t.style.display="none")}function showEmptyMessage(){let t=document.getElementById("filter-panel");if(t){t.style.display="block",document.getElementById("search").style.display="none",document.getElementById("no-results").style.display="inline",showLastUpdate()}}function filterAuctionById(){let t=$("#fliter-id").val(),e=$(".row");e.hide(),t?$(".flip-"+t).show():e.show()}fetchAuctions(0),setTimeout(function(){console.log("正在从链上获取新数据..."),web3.eth.subscribe("newBlockHeaders",newBlock)},5e3);